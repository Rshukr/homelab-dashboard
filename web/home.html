<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Homelab Dashboard</title>
  <meta name="description" content="Home with links to all routes." />
  <style>
    :root { color-scheme: light dark; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; line-height: 1.5; }
    .wrap { max-width: 720px; margin: 0 auto; padding: 24px; }
    h1 { margin: 0 0 8px; font-size: 28px; }
    p.lead { margin: 0 0 20px; color: #64748b; }
    section { margin: 18px 0 0; }
    ul { padding-left: 18px; }
    code { padding: 1px 6px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 0.95em; }
    a { color: inherit; }
    .card { border: 1px solid #e2e8f0; border-radius: 12px; padding: 16px; background: #fff; }
    @media (prefers-color-scheme: dark) {
      body { color: #e5e7eb; background: #0b1220; }
      .card { background: #0f172a; border-color: #1e293b; }
      code { border-color: #1e293b; }
    }
  </style>
  <link rel="icon" href="data:," />
  <script>const proto = location.protocol === 'https:' ? 'wss' : 'ws'; const host = location.host;</script>
  <script>function wsUrl(path){ return `${proto}://${host}${path}` }</script>
  <script>function copy(id){ const n=document.getElementById(id); navigator.clipboard.writeText(n.textContent); n.parentElement.querySelector('span.msg').textContent='copied'; setTimeout(()=>n.parentElement.querySelector('span.msg').textContent='',1000); }</script>
</head>
<body>
  <div class="wrap">
    <h1>Homelab Dashboard</h1>
    <p class="lead">Quick links to all available pages, APIs, and WebSockets.</p>

    <section class="card">
      <h2 style="margin:0 0 10px;font-size:20px;">Pages (HTML)</h2>
      <ul>
        <li><a href="/server_metrics">/server_metrics</a> — Server metrics page</li>
        <li><a href="/container_status">/container_status</a> — Container status page</li>
      </ul>
    </section>

    <section class="card">
      <h2 style="margin:0 0 10px;font-size:20px;">API (JSON)</h2>
      <ul>
        <li><a href="/api/server_metrics">GET /api/server_metrics</a></li>
        <li><a href="/api/container_status">GET /api/container_status</a></li>
      </ul>
    </section>

    <section class="card">
      <h2 style="margin:0 0 10px;font-size:20px;">WebSocket Endpoints</h2>
      <ul>
        <li>
          <code id="ws1">ws://HOST/server_metrics/ws</code> <span class="msg"></span>
          <button onclick="copy('ws1')">copy</button>
          <div style="font-size:13px;color:#64748b;">Full URL resolves to <code id="u1"></code></div>
        </li>
        <li>
          <code id="ws2">ws://HOST/api/server_metrics/ws</code> <span class="msg"></span>
          <button onclick="copy('ws2')">copy</button>
          <div style="font-size:13px;color:#64748b;">Full URL resolves to <code id="u2"></code></div>
        </li>
      </ul>
      <div style="font-size:13px;color:#64748b;margin-top:8px;">
        Tip: Use any WebSocket client (e.g., <code>wscat</code>) to subscribe.
      </div>
    </section>

    <section style="text-align:center;margin-top:22px;color:#94a3b8;">
      <small>Built with FastAPI • <span id="year"></span></small>
    </section>
  </div>

  <script>
    // Fill in actual ws:// or wss:// URLs based on current origin
    document.getElementById('u1').textContent = wsUrl('/server_metrics/ws');
    document.getElementById('u2').textContent = wsUrl('/api/server_metrics/ws');
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
